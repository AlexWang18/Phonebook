{"version":3,"sources":["components/PersonForm.js","components/DisplayPersons.js","components/Filter.js","components/Notification.js","services/BookServices.js","index.js"],"names":["Form","props","onSubmit","addPerson","htmlFor","name","value","newName","onChange","handleName","type","newNum","handleNum","Button","id","handleClick","console","log","onClick","Person","number","handleDelete","Persons","persons","map","p","_id","Filter","filter","filterHandler","Message","text","className","Error","baseURL","getAll","axios","get","then","response","data","addP","person","post","deleteP","delete","r","replace","put","App","useEffect","BookServices","people","setPersons","useState","setNewName","setNewNum","setFilter","showFilter","setShowed","message","setMessage","error","setError","replacePerson","changedPerson","updatedPerson","filterMatch","RegExp","event","target","preventDefault","some","window","confirm","find","personObj","trim","date","Date","toISOString","addedPerson","concat","alert","match","personTD","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b59d30ff.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n/* I tried to declare event handlers inside this seperate class but had difficulty than returning the \r\n//state of the persons back to the App component to render, forced to pass them as props so they can be shared across components\r\n*/\r\n\r\nconst Form = (props) => {\r\n\r\n    return (\r\n        <form onSubmit={props.addPerson}>\r\n            <div>\r\n                <label htmlFor = \"name\">Name: </label>\r\n                <input name = \"name\" value={props.newName} onChange={props.handleName} />\r\n            </div>\r\n            <div>\r\n                <label htmlFor = \"phone\">Phone number: </label>\r\n                <input name = \"phone\" type = \"tel\" value={props.newNum} onChange={props.handleNum} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport {\r\n    Form\r\n}","\r\nconst Button = ({ id, handleClick }) => {\r\n    console.log(id)\r\n    return (\r\n        <button onClick={() => handleClick(id)} >delete</button>\r\n    )\r\n}\r\n\r\nconst Person = ({ name, number, id, handleDelete }) => {\r\n    return (\r\n        <li>\r\n            {name} {number} {<Button name={name} id={id} handleClick={handleDelete} />}\r\n        </li>\r\n    )\r\n}\r\n\r\nconst Persons = ({ persons, handleDelete }) => { \r\n    return (\r\n        <ul>\r\n            {persons.map(p => <Person key={p.id} name={p.name} number={p.number} id={p._id} handleDelete={handleDelete} />)}\r\n        </ul>\r\n    )\r\n}\r\n\r\n//i can export a single component\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <form>\r\n            Filter results by<input value = {props.filter} onChange = {props.filterHandler} />\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter;\r\n","import React from 'react'\r\n\r\nconst Message = ({ text }) => {\r\n\r\n    if (text === null) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className='message'>\r\n            {text}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Error = ({ text }) => {\r\n    if (text === null) {\r\n        return null;\r\n    }\r\n    \r\n    return (\r\n        <div className='error'>\r\n            {text}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport {\r\n    Message,\r\n    Error\r\n}","import axios from 'axios'\r\n\r\nconst baseURL = 'http://localhost:3001/api/persons';\r\n\r\nconst getAll = () => {\r\n    return axios\r\n    .get(baseURL)\r\n    .then(response => response.data)\r\n}\r\n\r\nfunction addP(person) {\r\n    return axios\r\n    .post(baseURL, person)\r\n    .then(response => response.data)\r\n}\r\n\r\nconst deleteP = (id) => {\r\n    return axios\r\n    .delete(baseURL+'/'+id)\r\n    .then(r => r.data)\r\n}\r\n\r\nconst replace = (id, person) => {\r\n    return axios\r\n    .put((baseURL+'/'+id), person)\r\n    .then(r => r.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    addP,\r\n    deleteP,\r\n    replace\r\n}","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\n\nimport { Form } from './components/PersonForm'\nimport Persons from './components/DisplayPersons'\nimport Filter from './components/Filter'\nimport { Message, Error } from './components/Notification'\n\nimport BookServices from './services/BookServices'\n\nconst App = () => {\n\n  const hook = () => {\n    BookServices\n      .getAll()\n      .then(people => {\n        setPersons(people)\n        //set the initial state to the response to the get request to the json db.. renders with component\n      })\n  }\n  useEffect(hook, [])\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNum, setNewNum] = useState(\"000-000-0000\")\n  const [filter, setFilter] = useState('')\n  const [showFilter, setShowed] = useState(false)\n  const [message, setMessage] = useState(null)\n  const [error, setError] = useState(null)\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNum = (event) => {\n    setNewNum(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    if (newName === '') {\n      window.alert('Cannot have a blank name')\n      return;\n    }\n\n    if (persons.some(p => p.name === newName)) {\n\n      const choice = window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`)\n      if (choice) {\n        const person = persons.find(p => p.name === newName)\n        const changedPerson = { ...person, number: newNum }\n        replacePerson(person._id, changedPerson)\n      }\n      return;\n    }\n    else if (persons.some(p => p.number === newNum)){\n      setError(\"Cannot have duplicate phone numbers, either update the existing person or change the number \")\n    }\n\n    const personObj = {\n      name: newName.trim(),\n      date: new Date().toISOString,\n      number: newNum,\n      //id: persons.length + 1 + Math.floor(newNum / 144) \n    }\n    BookServices\n      .addP(personObj)\n      .then(addedPerson => {\n        setPersons(persons.concat(addedPerson))\n        setNewName('')\n        setMessage('Added ' + addedPerson.name)\n      }\n      )\n\n  }\n  const replacePerson = (id, changedPerson) => {\n    BookServices\n      .replace(id, changedPerson)\n      .then(updatedPerson => {\n        console.log(updatedPerson)\n        setPersons(persons.map(p => p._id !== id ? p : updatedPerson))\n        setMessage('Updated ' + updatedPerson.name)\n      })\n  /*    .catch(e => {\n        console.log(e)\n        setError(`Cannot update, information of ${changedPerson.name} has already been removed from server `)\n        setPersons(persons.filter(p => p.id !== id))\n      }) */\n  }\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n    setShowed(true)\n  }\n  const filterMatch = new RegExp(filter, 'i')\n\n\n  const handleDelete = (id) => { //need to put updating in main component generally, or else it is rough to update the state\n    const personTD = persons.find(p => p._id === id)\n    console.log(personTD)\n    //only getting first entry\n    if (window.confirm(`Delete ${personTD.name}?`)) {\n      BookServices\n        .deleteP(id)\n        .then(() => {\n          setPersons(persons.filter(p => p !== personTD))\n          setMessage(`Deleted ${personTD.name}`)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message text={message} />\n      <Error text={error} />\n      <Filter filter={filter} filterHandler={handleFilter} />\n      <h2>Add a new entry</h2>\n      <Form addPerson={addPerson}\n        handleName={handleNewName} handleNum={handleNewNum}\n        newName={newName} newNum={newNum} />\n\n      <h2>Numbers</h2>\n      <Persons persons={showFilter ?\n        persons.filter(p => p.name.match(filterMatch) || p.number.match(filterMatch))\n        : persons} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}